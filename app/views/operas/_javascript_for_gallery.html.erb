<script src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>

<script type="text/javascript">

$('img').hide()

$('#container').imagesLoaded( function() {
  start()
});

function start(){
  $("img").fadeIn(100)
  $(window).resize(setupHeightImages)
  setupHeightImages()
}


function setupHeightImages(){
  var wh =$(window).height()
  var topy = $('#opera-image img').offset().top
  var margine_sotto = 20
  var calculate = wh-topy-margine_sotto 
  if (calculate<300){
  calculate = 300;
  }
  var misure = calculate+'px'

  $('#opera-image img').css('max-height', misure)
}


function keydown_(e){
  var key = e.which||e.keyCode;
  switch(key){
    //left arrow
    case 37:
      if ( $('#prev').length > 0 ) {
        $("img").fadeOut(100)
        $("#prev").css('background-color', '#e6e6e6')
        $("#prev").css('border-color', '#adadad')
        $("#prev").css('color', '#333333')
        
        $("#prev")[0].click()
        
      }
    break;
    //right arrow
    case 39:
      //$("#next").click()
      if ( $('#next').length > 0 ) {
        $("img").fadeOut(100)
        
        $("#next").css('background-color', '#e6e6e6')
        $("#next").css('border-color', '#adadad')
        $("#next").css('color', '#333333')
        
        $("#next")[0].click()
        
      }
    break;
  }
}

$(document).keyup(function(e){ keydown_(e) })

</script>