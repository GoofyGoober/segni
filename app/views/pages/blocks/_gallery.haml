- if true
  %script(src="https://npmcdn.com/isotope-layout@3.0/dist/isotope.pkgd.min.js")

  %script(src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js")
  = javascript_include_tag 'packery-mode.pkgd.min.js'
  .container
    .grid
      .grid-sizer
      .gutter-sizer
      - block.operas.each_with_index do |opera, index|
        - style = "background-image: url(#{opera.image.url('_400x400c')}); background-size: cover; background-position: center"
        - if index == 3
          %a.grid-item.grid-item--width2.grid-item--height2{style: style, href: url_for(opera)}
        - elsif index == 12  
          %a.grid-item.grid-item--width2{style: style, href: url_for(opera)}
        - elsif index == 8
          - style = "background-image: url(#{opera.image.url('_400x400c')}); background-size: cover; background-position: center"

          %a.grid-item.grid-item--width4{style: style, href: url_for(opera)}
        - else
          %a.grid-item{style: style, href: url_for(opera)}

  :css
    .grid-sizer,
    .grid-item { width: 24%; height: 200px; display: block }

    .gutter-sizer { width: 1%; }
    /* spans 2 columns: 24% + 1% + 24% = 48% */
    .grid-item--width2 { width: 49%; }
    .grid-item--height2 { height: 410px; }
  :javascript
    isotope_setup()
- else
  .container#gallery-operas
    .row(style="padding-top: 20px")
      - block.operas.each do |opera|
        %div{class: columns_for_elements(block), style:"margin-top:10px; margin-bottom: 20px"}
          = link_to image_tag(opera.image.url('_400x400c'), class: 'img-responsive', style: 'min-width: 100%'), opera_path(opera,filter: block.title)